(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{33:function(e,t,r){},35:function(e,t,r){},37:function(e,t,r){},59:function(e,t,r){},60:function(e,t,r){},80:function(e,t,r){},81:function(e,t,r){},82:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(5),o=r.n(c),s=(r(33),r(4)),i=r(6),u=(r(34),r(35),r(1));function l(e){var t=e.onSubmit,r=Object(a.useState)(""),n=Object(s.a)(r,2),c=n[0],o=n[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),""===c.trim())return i.b.error("Please enter the search query!");t(c),o("")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.target.value)}})]})})}r(37);function b(e){var t=e.onClick;return Object(u.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load More"})}var h=r(28),j=r.n(h);r(58),r(59);function d(){return Object(u.jsx)("div",{className:"loaderWrap",children:Object(u.jsx)(j.a,{type:"Bars",color:"#00BFFF",height:175,width:175})})}var m=r(19),g=(r(60),r(7)),f=r.n(g),O=r(14),p=r(15),v=r(16),y=r(8),x=r(9),w=r(17),k=r.n(w),S=Object(x.a)("BASE_URL"),N=Object(x.a)("API_KEY"),I=function(){function e(){Object(p.a)(this,e),Object.defineProperty(this,S,{writable:!0,value:"https://api.pexels.com/v1/"}),Object.defineProperty(this,N,{writable:!0,value:"563492ad6f9170000100000142740a29c00e426eb1ebfda344bd325b"}),this.searchQuery="",this.pageNumber=1,this.qtyPerPage=12,this.endPoint="search"}return Object(v.a)(e,[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"page",get:function(){return this.pageNumber},set:function(e){this.pageNumber=e}},{key:"fetchImages",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.a.defaults.baseURL=Object(y.a)(this,S)[S],k.a.defaults.headers.common.Authorization=Object(y.a)(this,N)[N],t="".concat(this.endPoint,"?query=").concat(this.searchQuery,"&page=").concat(this.pageNumber,"&orientation=landscape&per_page=").concat(this.qtyPerPage),e.prev=3,e.next=6,k.a.get(t);case 6:return r=e.sent,e.next=9,r.data.photos;case 9:return a=e.sent,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(3),console.log("Something's wrong",e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),C=new I,P="idle",A="pending",E="resolved",F="rejected";function q(e){var t=e.searchQuery,r=Object(a.useState)(P),n=Object(s.a)(r,2),c=n[0],o=n[1],l=Object(a.useState)([]),h=Object(s.a)(l,2),j=h[0],g=h[1],f=Object(a.useState)(!1),O=Object(s.a)(f,2),p=O[0],v=O[1],y=Object(a.useState)(""),x=Object(s.a)(y,2),w=x[0],k=x[1],S=Object(a.useState)(""),N=Object(s.a)(S,2),I=N[0],q=N[1],B=Object(a.useCallback)((function(){try{C.fetchImages().then((function(e){0!==e.length?(g((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),R()):i.b.error("Nothing found! Please enter the correct query!")}))}catch(e){console.log("Okay, Houston, we've got a problem in fetchImages: ",e.message)}}),[]),U=function(e,t){k(e),q(t),H()},H=function(){v((function(e){return!e}))},R=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};switch(Object(a.useEffect)((function(){if(t){o(A);try{g([]),C.page=1,C.query=t,B(),o(E)}catch(e){o(F),console.log("Okay, Houston, we've got a problem in useEffect",e.message)}}}),[B,t]),c){case"idle":case"rejected":return null;case"pending":return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(d,{})});case"resolved":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:j.map((function(e){var t=e.id,r=e.src,a=r.large,n=r.medium,c=e.photographer;return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)(L,{largeImageUrl:a,smallImageUrl:n,imgDescription:c,onImageClick:U})},t)}))}),p&&Object(u.jsx)(Q,{alt:I,url:w,onClose:H,imageArray:j}),0!==j.length&&Object(u.jsx)("div",{className:"ButtonWrap",children:Object(u.jsx)(b,{onClick:function(){try{C.page+=1,B()}catch(e){o(F),console.log("Okay, Houston, we've got a problem here:",e.message)}}})})]});default:return}}r(80);function L(e){var t=e.smallImageUrl,r=e.largeImageUrl,a=e.imgDescription,n=e.onImageClick;return Object(u.jsx)("img",{src:t,alt:a,className:"ImageGalleryItem-image",onClick:function(){n(r,a)},"data-source":r})}r(81);var B=document.querySelector("#modal-root");function Q(e){var t=e.url,r=e.alt,n=e.onClose,o=e.imageArray,i=Object(a.useState)(t),l=Object(s.a)(i,2),b=l[0],h=l[1],j=Object(a.useState)(r),d=Object(s.a)(j,2),m=d[0],g=d[1],f=Object(a.useCallback)((function(){n()}),[n]),O=Object(a.useCallback)((function(e){var t,r,a;g(null===(t=o[e])||void 0===t?void 0:t.photographer),h(null===(r=o[e])||void 0===r||null===(a=r.src)||void 0===a?void 0:a.large)}),[o]),p=Object(a.useCallback)((function(e){var t=o.findIndex((function(e){return e.src.large===b}));switch(e.code){case"Escape":return void f();case t===o.length-1&&"ArrowRight":return void O(t=0);case t<o.length-1&&"ArrowRight":return void O(t+=1);case 0===t&&"ArrowLeft":return t=o.length-1,void O(t);case t>0&&"ArrowLeft":return void O(t-=1);default:return}}),[b,O,o,f]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",p),function(){window.removeEventListener("keydown",p)}}),[p]),Object(c.createPortal)(Object(u.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&f()},children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{src:b,alt:m})})}),B)}var U=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),r=t[0],n=t[1];return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(l,{onSubmit:function(e){n(e)}}),Object(u.jsx)(q,{searchQuery:r}),Object(u.jsx)(i.a,{autoClose:2e3,position:"top-right"})]})};o.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(U,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.c3f9d262.chunk.js.map